# THIS FILE IS MANAGED BY THE CONTAINER AND REPLACED ON STARTUP.
# DO NOT EDIT THIS FILE - ANY CHANGES WILL BE LOST.
# TO ADD YOUR OWN CONFIGURATION, USE: *.local FILE.

dockerEnv="/etc/jdvm-templates/base/docker-env"

if [[ -f "${dockerEnv}" && (-n "$(grep "export WAYLAND_DISPLAY=" "${dockerEnv}" | sed "s/.*=//")" \
        || -n "$(grep "export DISPLAY=" "${dockerEnv}" | sed "s/.*=//")") ]]; then
  export BROWSER="firefox"
  export EDITOR="gedit"
  export GTK_MODULES="canberra-gtk-module"
  export GTK_OVERLAY_SCROLLING=0
  export GTK_THEME="Yaru-blue-dark"
  export XCURSOR_SIZE=16
  export _JAVA_AWT_WM_NONREPARENTING=1
else
  export BROWSER="links"
  export EDITOR="nano"
fi

if [[ (-f "${dockerEnv}" && -n "$(grep "export WAYLAND_DISPLAY=" "${dockerEnv}" | sed "s/.*=//")") ]]; then
  export CLUTTER_BACKEND="wayland"
  export ELECTRON_OZONE_PLATFORM_HINT="auto"
  export GDK_BACKEND="wayland,x11"
  # TODO MOZ_ENABLE_WAYLAND is buggy
  # export MOZ_ENABLE_WAYLAND=1
  export OZONE_PLATFORM="wayland"
  export QT_QPA_PLATFORM="wayland;xcb"
  export QT_SCALE_FACTOR_ROUNDING_POLICY="RoundPreferFloor"
  export QT_WAYLAND_RECONNECT=1
  export SDL_VIDEODRIVER="wayland,x11"
  export XDG_SESSION_TYPE="wayland"
elif [[ -f "${dockerEnv}" && -n "$(grep "export DISPLAY=" "${dockerEnv}" | sed "s/.*=//")" ]]; then
  export CLUTTER_BACKEND="x11"
  export ELECTRON_OZONE_PLATFORM_HINT="x11"
  export GDK_BACKEND="x11"
  export OZONE_PLATFORM="x11"
  export QT_QPA_PLATFORM="xcb"
  export SDL_VIDEODRIVER="x11"
  export XDG_SESSION_TYPE="x11"
fi

export ADW_DISABLE_PORTAL=1
export FIREFOX_PROFILE="${image.user}"
export LESSHISTFILE=-
export NO_AT_BRIDGE=1
export XDG_BIN_HOME="$HOME/.local/bin"
export XDG_CACHE_HOME="$HOME/.cache"
export XDG_CONFIG_HOME="$HOME/.config"
export XDG_DATA_HOME="$HOME/.local/share"
export XDG_STATE_HOME="$HOME/.local/state"
export XDG_DESKTOP_DIR="$HOME"
export XDG_DOCUMENTS_DIR="$HOME"
export XDG_DOWNLOAD_DIR="$HOME"
export XDG_MUSIC_DIR="$HOME"
export XDG_PICTURES_DIR="$HOME"
export XDG_PUBLICSHARE_DIR="$HOME"
export XDG_TEMPLATES_DIR="$HOME"
export XDG_VIDEOS_DIR="$HOME"
export XDG_CONFIG_DIRS="/etc/xdg"
export XDG_DATA_DIRS="/usr/local/share:/usr/share"
export XDG_RUNTIME_DIR="/run/user/$(id -u)"
